<section class="section" id="jobs">
  <div class="container jobs">
    <div class="section-box">
      <div class="about-title mb-5" data-animate="slideInUp" data-animate-duration="1000">
        <h3 class="e-font section-title">
          <span class="code-font n-section-title">02.</span>
          {{ "Experience.Title" | translate }}
        </h3>
      </div>

      <!-- Loading Spinner -->
      <div *ngIf="isLoading" class="text-center">
        <div class="spinner-border text-success" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- Experience Tabs -->
      <div
        *ngIf="!isLoading && experiences.length > 0"
        class="jobs-tabs"
        data-animate="fadeInUp"
        data-animate-duration="1200"
        data-animate-delay="300"
      >
        <ul
          ngbNav
          #nav="ngbNav"
          [(activeId)]="active"
          orientation="vertical"
          class="nav-tabs jobs-tabs"
        >
          <li
            *ngFor="let experience of experiences; let i = index"
            [title]="experience.companyName"
            [ngbNavItem]="i"
            data-animate="scaleIn"
            [attr.data-animate-delay]="600 + (i * 150)"
          >
            <a ngbNavLink>{{ experience.companyName }}</a>

            <ng-template ngbNavContent>
              <!-- Role and Company -->
              <h4 class="title-tab-content">
                {{ experience.role }} |
                <span class="company-tab-content">{{ experience.companyName }}</span>
              </h4>

              <h5 class="job-time">
                {{ experience.startDate | date:'MMM yyyy':'':'en-US' }} -
                {{ experience.endDate
                    ? (experience.endDate | date:'MMM yyyy':'':'en-US')
                    : 'Present' }}
              </h5>

              <!-- Responsibilities -->
              <div *ngFor="let descriptionPoint of experience.responsibilities; let j = index">
                <p
                  class="job-description"
                  [innerHTML]="descriptionPoint"
                  data-animate="fadeInLeft"
                  [attr.data-animate-delay]="j * 200"
                ></p>
              </div>

              <!-- DESIGN OPTION 1 -->
              <div class="design-option-1">

                <!-- Projects -->
                <div *ngIf="experience.projects?.length > 0" class="projects-wrapper">
                  <div class="section-header">
                    <span class="header-icon">ðŸš€</span>
                    <h4 class="section-title">Projects</h4>
                  </div>

                  <div *ngFor="let project of experience.projects; let pIndex = index" class="project-box">
                    <div class="project-number">{{ pIndex + 1 }}</div>

                    <div class="project-content">
                      <h3 class="project-title">{{ project.name }}</h3>
                      <p class="project-desc">{{ project.description }}</p>

                      <div *ngIf="project.technologies?.length" class="tech-tags">
                        <span *ngFor="let tech of project.technologies" class="tech-tag">
                          {{ tech }}
                        </span>
                      </div>

                      <div *ngIf="project.contribution" class="contribution-box">
                        <div class="contribution-header">
                          <span class="contrib-icon">ðŸ’¡</span>
                          <span class="contrib-label">Key Contribution</span>
                        </div>
                        <p class="contrib-text">{{ project.contribution }}</p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Impact (LIST) -->
                <div *ngIf="experience.impact?.length > 0" class="impact-wrapper">
                  <div class="impact-header">
                    <span class="impact-icon">ðŸ“Š</span>
                    <h4 class="impact-title">Impact & Results</h4>
                  </div>

                  <ul class="impact-list">
                    <li
                      *ngFor="let impactItem of experience.impact; let k = index"
                      class="impact-text"
                      data-animate="fadeInUp"
                      [attr.data-animate-delay]="k * 150"
                    >
                      {{ impactItem.statement }}
                    </li>
                  </ul>
                </div>

              </div>
            </ng-template>
          </li>
        </ul>

        <div [ngbNavOutlet]="nav" class="mt-2"></div>
      </div>

      <!-- No Data Message -->
      <div *ngIf="!isLoading && experiences.length === 0" class="text-center text-light">
        <p>No experience data available at the moment.</p>
      </div>
    </div>
  </div>
</section>
